<!doctype html>
<html lang="en">

	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="Coding Agents in Containers" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="apple-touch-icon" href="/icon-192.png" />
		<title>caic.xyz</title>
		<style>
			:root {
				--bg: #0a0a0a;
				--fg: #e0e0e0;
				--accent: #00ff41;
				--dim: #666;
				--font: 'JetBrains Mono', 'Fira Code', 'Courier New', monospace;
			}

			body {
				background-color: var(--bg);
				color: var(--fg);
				font-family: var(--font);
				display: flex;
				flex-direction: column;
				align-items: center;
				justify-content: center;
				height: 100vh;
				margin: 0;
				padding: 2rem;
				line-height: 1.6;
				overflow: hidden;
				box-sizing: border-box;
			}

			main {
				max-width: 600px;
				width: 100%;
			}

			h1 {
				font-size: 1.5rem;
				font-weight: normal;
				margin-bottom: 2rem;
				color: var(--accent);
			}

			h1::before {
				content: '> ';
			}

			ul {
				list-style: none;
				padding: 0;
			}

			li {
				margin-bottom: 1.5rem;
			}

			a {
				color: var(--accent);
				text-decoration: none;
				border-bottom: 1px solid transparent;
				transition: border-color 0.2s ease;
			}

			a:hover {
				border-bottom-color: var(--accent);
			}

			.repo-desc {
				display: block;
				font-size: 0.9rem;
				color: var(--dim);
				margin-top: 0.25rem;
			}

			.cursor {
				display: inline-block;
				width: 0.6em;
				height: 1.2em;
				background-color: var(--accent);
				vertical-align: middle;
				margin-left: 0.2rem;
				animation: blink 1s step-end infinite;
			}

			@keyframes blink {

				0%,
				100% {
					opacity: 1;
				}

				50% {
					opacity: 0;
				}
			}

			/* Waitlist button */
			.waitlist-btn {
				background: transparent;
				color: var(--accent);
				border: 1px solid var(--accent);
				font-family: var(--font);
				font-size: 0.95rem;
				padding: 0.6rem 1.4rem;
				cursor: pointer;
				margin-top: 2rem;
				transition: background 0.2s, color 0.2s;
			}

			.waitlist-btn:hover {
				background: var(--accent);
				color: var(--bg);
			}

			/* Modal overlay */
			.overlay {
				display: none;
				position: fixed;
				inset: 0;
				background: rgba(0, 0, 0, 0.85);
				align-items: center;
				justify-content: center;
				z-index: 10;
				overflow-y: auto;
			}

			.overlay.open {
				display: flex;
			}

			.form-panel {
				background: var(--bg);
				border: 1px solid var(--accent);
				padding: 2rem;
				max-width: 520px;
				width: 90%;
				margin: auto;
			}

			@media (max-width: 600px) {
				.overlay {
					align-items: flex-start;
				}

				.form-panel {
					width: 100%;
					margin: 0;
					border-left: none;
					border-right: none;
					padding: 1.5rem 1rem;
				}
			}

			.form-panel h2 {
				color: var(--accent);
				font-size: 1.1rem;
				font-weight: normal;
				margin: 0 0 1.5rem;
			}

			.form-panel h2::before {
				content: '> ';
			}

			.form-group {
				margin-bottom: 1.5rem;
			}

			.form-group > label {
				display: block;
				color: var(--fg);
				font-size: 0.85rem;
				margin-bottom: 0.4rem;
			}

			.form-group > label::before {
				content: '# ';
				color: var(--dim);
			}

			.form-group input[type="email"] {
				width: 100%;
				background: #111;
				color: var(--fg);
				border: 1px solid #333;
				font-family: var(--font);
				font-size: 0.85rem;
				padding: 0.5rem;
				box-sizing: border-box;
			}

			.form-group input[type="email"]:focus {
				outline: none;
				border-color: var(--accent);
			}

			.form-group textarea {
				width: 100%;
				background: #111;
				color: var(--fg);
				border: 1px solid #333;
				font-family: var(--font);
				font-size: 0.85rem;
				padding: 0.5rem;
				resize: vertical;
				box-sizing: border-box;
			}

			.form-group textarea:focus {
				outline: none;
				border-color: var(--accent);
			}

			.checkbox-group {
				display: flex;
				flex-wrap: wrap;
				gap: 0.4rem 1rem;
				margin-top: 0.3rem;
			}

			.checkbox-group label {
				display: flex;
				align-items: center;
				gap: 0.4rem;
				font-size: 0.8rem;
				cursor: pointer;
			}

			.checkbox-group label::before {
				content: none;
			}

			.checkbox-group input[type="checkbox"] {
				accent-color: var(--accent);
			}

			.other-label {
				display: block;
				width: 100%;
				font-size: 0.8rem;
				color: var(--fg);
				margin-top: 0.3rem;
			}

			.other-text {
				width: 100%;
				background: #111;
				color: var(--fg);
				border: 1px solid #333;
				font-family: var(--font);
				font-size: 0.8rem;
				padding: 0.4rem;
				resize: vertical;
				box-sizing: border-box;
			}

			.other-text:focus {
				outline: none;
				border-color: var(--accent);
			}

			.form-actions {
				display: flex;
				gap: 0.75rem;
				justify-content: flex-end;
			}

			.btn-submit {
				background: var(--accent);
				color: var(--bg);
				border: 1px solid var(--accent);
				font-family: var(--font);
				font-size: 0.85rem;
				padding: 0.5rem 1.2rem;
				cursor: pointer;
			}

			.btn-cancel {
				background: transparent;
				color: var(--dim);
				border: 1px solid #333;
				font-family: var(--font);
				font-size: 0.85rem;
				padding: 0.5rem 1.2rem;
				cursor: pointer;
			}

			.btn-cancel:hover {
				border-color: var(--fg);
				color: var(--fg);
			}

			.form-msg {
				display: none;
				color: var(--accent);
				font-size: 0.85rem;
				margin-top: 1rem;
			}
		</style>
	</head>

	<body>
		<main>
			<h1 id="heading">caic.xyz<span class="cursor"></span></h1>

			<ul>
				<li>
					<a href="https://github.com/caic-xyz/caic">github.com/caic-xyz/caic</a>
					<span class="repo-desc">Coding Agents in Containers</span>
				</li>
				<li>
					<a href="https://github.com/caic-xyz/md">github.com/caic-xyz/md</a>
					<span class="repo-desc">My Development containers</span>
				</li>
			</ul>

			<button class="waitlist-btn" onclick="document.getElementById('waitlist-overlay').classList.add('open')">
				Join Waitlist
			</button>
		</main>

		<div id="waitlist-overlay" class="overlay">
			<div class="form-panel">
				<h2>waitlist</h2>
				<form id="waitlist-form">
					<div class="form-group">
						<label>Which platform do you develop for?</label>
						<div class="checkbox-group">
							<label><input type="checkbox" name="target_platforms" value="Windows"> Windows</label>
							<label><input type="checkbox" name="target_platforms" value="macOS"> macOS</label>
							<label><input type="checkbox" name="target_platforms" value="Linux"> Linux</label>
							<label><input type="checkbox" name="target_platforms" value="iOS"> iOS</label>
							<label><input type="checkbox" name="target_platforms" value="Android"> Android</label>
							<label><input type="checkbox" name="target_platforms" value="XBox"> XBox</label>
							<label><input type="checkbox" name="target_platforms" value="Playstation"> Playstation</label>
							<label><input type="checkbox" name="target_platforms" value="Micro-controllers"> Micro-controllers (ESP32, STM32, etc)</label>
							<span class="other-label">Other:</span>
							<textarea id="platform-other" class="other-text" name="target_platforms_other" rows="2" placeholder="specify..."></textarea>
						</div>
					</div>
					<div class="form-group">
						<label>Which OS do you develop on?</label>
						<div class="checkbox-group">
							<label><input type="checkbox" name="dev_os" value="Windows"> Windows</label>
							<label><input type="checkbox" name="dev_os" value="macOS"> macOS</label>
							<label><input type="checkbox" name="dev_os" value="Linux"> Linux</label>
							<span class="other-label">Other:</span>
							<textarea id="dev-os-other" class="other-text" name="dev_os_other" rows="2" placeholder="specify..."></textarea>
						</div>
					</div>
					<div class="form-group">
						<label for="q-pain">What pain are you trying to solve?</label>
						<textarea id="q-pain" name="pain" rows="2" required></textarea>
					</div>
					<div class="form-group">
						<label for="q-pay">What would you be willing to pay for and how much?</label>
						<textarea id="q-pay" name="pay" rows="2" required></textarea>
					</div>
					<div class="form-group">
						<label for="q-email">Email</label>
						<input type="email" id="q-email" name="email" required />
					</div>
					<div class="form-actions">
						<button type="button" class="btn-cancel"
							onclick="document.getElementById('waitlist-overlay').classList.remove('open')">cancel</button>
						<button type="submit" class="btn-submit">submit</button>
					</div>
					<div id="form-msg" class="form-msg"></div>
				</form>
			</div>
		</div>

		<script>
			function getChecked(name) {
				return [...document.querySelectorAll('input[name="' + name + '"]:checked')].map(el => el.value);
			}

			document.getElementById('waitlist-form').addEventListener('submit', async (e) => {
				e.preventDefault();
				const form = e.target;
				const msg = document.getElementById('form-msg');
				const submit = form.querySelector('.btn-submit');

				msg.style.display = 'none';

				try {
					if (!form.pain.value.trim() || !form.pay.value.trim()) {
						throw new Error('please fill in all text fields');
					}
					const target_platforms = getChecked('target_platforms');
					const otherPlatform = form.target_platforms_other.value.trim();
					if (otherPlatform) {
						target_platforms.push(otherPlatform);
					}
					if (target_platforms.length === 0) {
						throw new Error('select at least one target platform');
					}
					const dev_os = getChecked('dev_os');
					const otherOs = form.dev_os_other.value.trim();
					if (otherOs) {
						dev_os.push(otherOs);
					}
					if (dev_os.length === 0) {
						throw new Error('select at least one development OS');
					}

					submit.disabled = true;
					submit.textContent = 'submitting...';

					const res = await fetch('/api/waitlist', {
						method: 'POST',
						headers: {'Content-Type': 'application/json'},
						body: JSON.stringify({
							email: form.email.value,
							pain: form.pain.value,
							pay: form.pay.value,
							target_platforms,
							dev_os,
						}),
					});

					if (!res.ok) {
						const err = await res.json();
						throw new Error(err.error || 'submission failed');
					}

					form.reset();
					document.getElementById('waitlist-overlay').classList.remove('open');
					const btn = document.querySelector('.waitlist-btn');
					btn.textContent = '> submitted. we\'ll be in touch.';
					btn.disabled = true;
					btn.style.cursor = 'default';
				} catch (err) {
					msg.textContent = '> error: ' + err.message;
					msg.style.color = '#ff4141';
					msg.style.display = 'block';
				} finally {
					submit.disabled = false;
					submit.textContent = 'submit';
				}
			});
		</script>
	</body>

</html>
