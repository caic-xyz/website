<!doctype html>
<html lang="en">

	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="Coding Agents in Containers" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="apple-touch-icon" href="/icon-192.png" />
		<title>caic.xyz</title>
		<style>
			:root {
				--bg: #0a0a0a;
				--fg: #e0e0e0;
				--accent: #00ff41;
				--dim: #666;
				--font: 'JetBrains Mono', 'Fira Code', 'Courier New', monospace;
			}

			body {
				background-color: var(--bg);
				color: var(--fg);
				font-family: var(--font);
				display: flex;
				flex-direction: column;
				align-items: center;
				justify-content: center;
				min-height: 100vh;
				margin: 0;
				padding: 2rem;
				line-height: 1.6;
			}

			main {
				max-width: 600px;
				width: 100%;
			}

			h1 {
				font-size: 1.5rem;
				font-weight: normal;
				margin-bottom: 2rem;
				color: var(--accent);
			}

			h1::before { content: '> '; }

			ul {
				list-style: none;
				padding: 0;
			}

			li { margin-bottom: 1.5rem; }

			a {
				color: var(--accent);
				text-decoration: none;
				border-bottom: 1px solid transparent;
				transition: border-color 0.2s ease;
			}

			a:hover { border-bottom-color: var(--accent); }

			.repo-desc {
				display: block;
				font-size: 0.9rem;
				color: var(--dim);
				margin-top: 0.25rem;
			}

			.cursor {
				display: inline-block;
				width: 0.6em;
				height: 1.2em;
				background-color: var(--accent);
				vertical-align: middle;
				margin-left: 0.2rem;
				animation: blink 1s step-end infinite;
			}

			@keyframes blink {
				0%, 100% { opacity: 1; }
				50% { opacity: 0; }
			}

			/* Waitlist button */
			.waitlist-btn {
				background: transparent;
				color: var(--accent);
				border: 1px solid var(--accent);
				font-family: var(--font);
				font-size: 0.95rem;
				padding: 0.6rem 1.4rem;
				cursor: pointer;
				margin-top: 2rem;
				transition: background 0.2s, color 0.2s;
			}

			.waitlist-btn:hover {
				background: var(--accent);
				color: var(--bg);
			}

			/* Modal overlay */
			.overlay {
				display: none;
				position: fixed;
				inset: 0;
				background: rgba(0, 0, 0, 0.85);
				align-items: center;
				justify-content: center;
				z-index: 10;
			}

			.overlay.open { display: flex; }

			.form-panel {
				background: var(--bg);
				border: 1px solid var(--accent);
				padding: 2rem;
				max-width: 520px;
				width: 90%;
			}

			.form-panel h2 {
				color: var(--accent);
				font-size: 1.1rem;
				font-weight: normal;
				margin: 0 0 1.5rem;
			}

			.form-panel h2::before { content: '> '; }

			.form-group { margin-bottom: 1.5rem; }

			.form-group label {
				display: block;
				color: var(--fg);
				font-size: 0.85rem;
				margin-bottom: 0.4rem;
			}

			.form-group label::before {
				content: '# ';
				color: var(--dim);
			}

			.form-group textarea {
				width: 100%;
				min-height: 80px;
				background: #111;
				color: var(--fg);
				border: 1px solid #333;
				font-family: var(--font);
				font-size: 0.85rem;
				padding: 0.5rem;
				resize: vertical;
				box-sizing: border-box;
			}

			.form-group textarea:focus {
				outline: none;
				border-color: var(--accent);
			}

			.form-actions {
				display: flex;
				gap: 0.75rem;
				justify-content: flex-end;
			}

			.btn-submit {
				background: var(--accent);
				color: var(--bg);
				border: 1px solid var(--accent);
				font-family: var(--font);
				font-size: 0.85rem;
				padding: 0.5rem 1.2rem;
				cursor: pointer;
			}

			.btn-cancel {
				background: transparent;
				color: var(--dim);
				border: 1px solid #333;
				font-family: var(--font);
				font-size: 0.85rem;
				padding: 0.5rem 1.2rem;
				cursor: pointer;
			}

			.btn-cancel:hover {
				border-color: var(--fg);
				color: var(--fg);
			}

			.form-msg {
				display: none;
				color: var(--accent);
				font-size: 0.85rem;
				margin-top: 1rem;
			}
		</style>
	</head>

	<body>
		<main>
			<h1 id="heading">caic.xyz<span class="cursor"></span></h1>

			<ul>
				<li>
					<a href="https://github.com/caic-xyz/caic">caic-xyz/caic</a>
					<span class="repo-desc">Coding Agents in Containers</span>
				</li>
				<li>
					<a href="https://github.com/caic-xyz/md">caic-xyz/md</a>
					<span class="repo-desc">My Development containers</span>
				</li>
			</ul>

			<button class="waitlist-btn" onclick="document.getElementById('waitlist-overlay').classList.add('open')">
				Join Waitlist
			</button>
		</main>

		<div id="waitlist-overlay" class="overlay" onclick="if(event.target===this)this.classList.remove('open')">
			<div class="form-panel">
				<h2>waitlist</h2>
				<form id="waitlist-form">
					<div class="form-group">
						<label for="q-pain">What pain are you trying to solve?</label>
						<textarea id="q-pain" name="pain" required></textarea>
					</div>
					<div class="form-group">
						<label for="q-pay">What would you be willing to pay for and how much?</label>
						<textarea id="q-pay" name="pay" required></textarea>
					</div>
					<div class="form-actions">
						<button type="button" class="btn-cancel" onclick="document.getElementById('waitlist-overlay').classList.remove('open')">cancel</button>
						<button type="submit" class="btn-submit">submit</button>
					</div>
					<div id="form-msg" class="form-msg"></div>
				</form>
			</div>
		</div>

		<script>
			document.getElementById('waitlist-form').addEventListener('submit', async (e) => {
				e.preventDefault();
				const form = e.target;
				const msg = document.getElementById('form-msg');
				const submit = form.querySelector('.btn-submit');

				submit.disabled = true;
				submit.textContent = 'submitting...';
				msg.style.display = 'none';

				try {
					const res = await fetch('/api/waitlist', {
						method: 'POST',
						headers: { 'Content-Type': 'application/json' },
						body: JSON.stringify({
							pain: form.pain.value,
							pay: form.pay.value,
						}),
					});

					if (!res.ok) {
						const err = await res.json();
						throw new Error(err.error || 'submission failed');
					}

					msg.textContent = '> submitted. we\'ll be in touch.';
					msg.style.color = 'var(--accent)';
					msg.style.display = 'block';
					form.pain.value = '';
					form.pay.value = '';
				} catch (err) {
					msg.textContent = '> error: ' + err.message;
					msg.style.color = '#ff4141';
					msg.style.display = 'block';
				} finally {
					submit.disabled = false;
					submit.textContent = 'submit';
				}
			});
		</script>
	</body>

</html>
